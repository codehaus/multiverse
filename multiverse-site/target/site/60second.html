<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><title>Multiverse - Java based Software Transactional Memory implementation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="style.css" type="text/css"/>

    <!-- start of google analytics stuff -->
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
        _uacct = "UA-2882464-1";
        urchinTracker();
    </script>
    <!-- end of google analytics stuff -->
</head>
<body>

<div id="main-header">
    <div>
        <h1 class="main-header-left">Java based Software Transactional Memory implementation</h1>
        <hr class="hide"/>
    </div>
</div>

<div id="header">
    <div id="header-title">
        <h1>Multiverse</h1>

        <p>Founded by Peter Veentjer</p>
    </div>
    <!-- div id="header-logo" -->
    <!-- a id="header-logo" href="http://www.codehaus.org">codehaus.org</a -->
    <!-- /div -->
    <hr class="hide"/>
</div>

<div id="content">
    <div id="side">
        
        <div class="nav-title">
            <div><h3>Menu</h3></div>
        </div>
        <ul class="nav">
            
            <li><a class="unselected" href="overview.html">Overview</a></li>
            
            
            <li><a class="unselected" href="download.html">Download</a></li>
            
            
            <li><a class="unselected" href="features.html">Features</a></li>
            
            
            <li><a class="unselected" href="missionstatement.html">Mission Statement</a></li>
            
            
            <li><a class="unselected" href="nosql.html">NoSQL</a></li>
            
            
            <li><a class="unselected" href="team.html">Team</a></li>
            
            
            <li><a class="unselected" href="http://pveentjer.wordpress.com">Blog</a></li>
            
            
            <li><a class="unselected" href="development.html">Development</a></li>
            
            
            <li><a class="unselected" href="http://pveentjer.wordpress.com">Blog</a></li>
            
            
            <li><a class="unselected" href="license.html">License</a></li>
            
            
        </ul>
        <div class="nav-footer">
            <div></div>
        </div>
        <hr class="hide"/>
        
        <div class="nav-title">
            <div><h3>Documentation</h3></div>
        </div>
        <ul class="nav">
            
            <li><a class="unselected" href="documentationoverview.html">Overview</a></li>
            
            
            <li><a class="unselected" href="manual.html">Reference Manual</a></li>
            
            
            <li><a class="unselected" href="https://linktojavadoc">Javadoc</a></li>
            
            
        </ul>
        <div class="nav-footer">
            <div></div>
        </div>
        <hr class="hide"/>
        
    </div>

    <div id="mainContent">
        <h1>60 Second guide to Multiverse</h1>

Multiverse is a Software Transansactional Memory implementation and meant as an alternative to traditional lock
based concurrency. If you have worked with databases before, Transactional Memory should feel familiar because
both share 1 very important concept; transactions.
<p/>
In Multiverse a normal Pojo can be made transactional by adding the TransactionalObject annotation, e.g.:
<pre>

    import org.multiverse.transactional.annotations.TransactionalObject;

    @TransactionalObject
    public class Account{

        private Date lastUpdate;
        private int balance;

        public Account(int balance){
            setBalance(balance);
        }

        public int getBalance(){
            return balance;
        }

        public void setBalance(int newBalance){
            lastUpdate = new Date();
    
            if(newBalance &lt; 0){
                throw new IllegalStateException("negative balance not allowed");
            }
            balance = newBalance;
        }

        public int getLastUpdate(){
            return lastUpdate;
        }
    }
</pre>
All <b>instance</b> methods of this Account class will now be transactional and give you the following features:
<ol>
    <li><b>failure atomicity:</b> all writes will commit or none will commit. For an example check the
        setBalance method where the lastUpdate is set even though the call could fail.
    </li>
    <li><b>isolation: </b> all reads and writes are thread-safe and are isolated from
        other transactions. A transaction automatically gets a near-serializable isolation level.
    </li>
    <li><b>no deadlocks:</b> between transactions because deadlocks are prevented by the STM.
</ol>
Another big advantage is that the methods have become composable, so you can combine methods while keeping the
transactional properties. This is very hard to realize with a traditional lock based approach. Composing can be
done by creating a new instance method on a transactional object that calls the composing operations, or
by adding a TransactionalMethod annotation around a normal method or around a static method of a transactional
object, e.g.:

<pre>
    import org.multiverse.transactional.annotations.TransactionalMethod;
    import org.multiverse.transactional.annotations.TransactionalObject;

    @TransactionalObject
    public class Account{

        ...

        @TransactionalMethod
        public static void transfer(Account from, Account to, int amount){
            from.setBalance(from.getBalance()-amount);
            to.setBalance(to.getBalance()+amount);
        }
    }
</pre>
Money can safely be transfered from one acount to another using the transfer method; so no race problems, partial
writes or deadlocks are possible.
<p/>
These examples only scratchs the surface of Multiverse, but just having transactional methods can be
a very big step forward in a lot of cases. For more advanced features and indepth documention, the
<a href="manual.html">manual</a> or te <a href="documentationoverview.html">Documentation overview</a> 
        are the best places to get started.
                                          
<h3>Footnote</h3>
To make this transactional behavior possible, you need to set up the Multiverse Java agent. For more information check
the <a href="setup-javaagent.html">Javaagent setup page</a>.
    </div>

    <!-- end of main content -->

    <div id="footer">
        <hr class="hide"/>
        <div id="footer-contents">Last updated: 3 Januari 2010
            <br/>
            Copyright Â© 2010
        </div>
    </div>
</div>
<!-- content -->
</body>
</html>
